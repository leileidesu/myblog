<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>django on 做我的小猫猫吧</title><link>https://leileidesu.github.io/myblog/tags/django/</link><description>Recent content in django on 做我的小猫猫吧</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Tue, 03 Jan 2023 00:04:04 +0800</lastBuildDate><atom:link href="https://leileidesu.github.io/myblog/tags/django/index.xml" rel="self" type="application/rss+xml"/><item><title> elasticsearch+haystack+django前后端分离配置记录</title><link>https://leileidesu.github.io/myblog/leetcode/elasticsearch+haystack+django%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95/</link><pubDate>Tue, 03 Jan 2023 00:04:04 +0800</pubDate><guid>https://leileidesu.github.io/myblog/leetcode/elasticsearch+haystack+django%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95/</guid><description>elasticsearch+haystack+django前后端分离配置记录 这次的大作业需要做一个类似于知网的学术网站。（数据量是几亿数量级的）（也就是要做大量的全文检索）（这么大的数据，要是直接用sql语句select * from article where abstract like &amp;lsquo;%linux%&amp;rsquo;;要花很久很久）（这是根据mysql底层的数据索引方式决定的）（反正就是要花很久）（但是es进行这种全文检索就比较快，应该是毫秒级别的）（所以只能用es检索）（但是es和mysql存在的价值各有侧重）（es虽然也能算是一种数据库，但是只擅长检索，没有什么好的备份恢复机制，增删改也不太行）（所以我们的方案是在mysql里存，然后通过监听mysql加一条，es也加一条，查的时候在es里面查）（又因为我们用的是django后端框架，有一个有点好用但是又不太好用的东西叫haystack，提供了django里对es的一系列api），各种技术栈都比较陌生，也比较折磨，所以写个博客纪念。
首先，本教程的前半部分（配置部分）是参考的：https://blog.csdn.net/qq_52385631/article/details/126590931。可以直接照着它做，做完了来这里补充后半部分。
1.安装elasticsearch 按理来说elasticsearch的最新版本是8.5，但是haystack框架（Haystack是 Django 框架的搜索扩展模块）最高只支持es7.x，所以我选择安装elasticsearch7.17
方式详见：https://www.elastic.co/guide/en/elasticsearch/reference/7.17/targz.html
wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.17.8-linux-x86_64.tar.gz wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.17.8-linux-x86_64.tar.gz.sha512 shasum -a 512 -c elasticsearch-7.17.8-linux-x86_64.tar.gz.sha512 tar -xzf elasticsearch-7.17.8-linux-x86_64.tar.gz cd elasticsearch-7.17.8/ es不支持root用户运行，所以需要为此新建一个es:es用户，切换到该用户下，运行./bin/elasticsearch。访问http://localhost:9200/，如果能看到类似这样的json：
{ &amp;#34;name&amp;#34; : &amp;#34;Cp8oag6&amp;#34;, &amp;#34;cluster_name&amp;#34; : &amp;#34;elasticsearch&amp;#34;, &amp;#34;cluster_uuid&amp;#34; : &amp;#34;AT69_T_DTp-1qgIJlatQqA&amp;#34;, &amp;#34;version&amp;#34; : { &amp;#34;number&amp;#34; : &amp;#34;7.17.8&amp;#34;, &amp;#34;build_flavor&amp;#34; : &amp;#34;default&amp;#34;, &amp;#34;build_type&amp;#34; : &amp;#34;tar&amp;#34;, &amp;#34;build_hash&amp;#34; : &amp;#34;f27399d&amp;#34;, &amp;#34;build_date&amp;#34; : &amp;#34;2016-03-30T09:51:41.449Z&amp;#34;, &amp;#34;build_snapshot&amp;#34; : false, &amp;#34;lucene_version&amp;#34; : &amp;#34;8.11.1&amp;#34;, &amp;#34;minimum_wire_compatibility_version&amp;#34; : &amp;#34;1.2.3&amp;#34;, &amp;#34;minimum_index_compatibility_version&amp;#34; : &amp;#34;1.2.3&amp;#34; }, &amp;#34;tagline&amp;#34; : &amp;#34;You Know, for Search&amp;#34; } 就算成功了。</description></item></channel></rss>